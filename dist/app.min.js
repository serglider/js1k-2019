let time,path,x,y,fX,fY,mode=2,red="red",M=Math,pi=M.PI,pi2=2*pi,o=100;a.onmousedown=(()=>{mode=0,time=0,path=[],x=[],y=[]}),a.onmouseup=(()=>{mode=1;const e=(e,o)=>o.a-e.a;fX=fourierT(x),fY=fourierT(y),fX.sort(e),fY.sort(e)}),a.onmousemove=(e=>{mode||(x.push(e.pageX),y.push(e.pageY))});let stroke=e=>{c.strokeStyle=e,c.stroke()},lineTo=(e,o,t)=>{t?c.lineTo(e,o):c.moveTo(e,o)},drawFourier=(e,o,t,r)=>{let i=e,a=o;return r.forEach(e=>{let o=i,r=a,l=e.a,p=e.p+time*e.f+t;i+=l*M.cos(p),a+=l*M.sin(p),c.beginPath(),c.arc(o,r,2*l,0,pi2),lineTo(o,r,0),lineTo(i,a),stroke("#555")}),{x:i,y:a}},loop=()=>{if(c.fillStyle="#000",c.fillRect(0,0,a.width,a.height),1===mode){let e=drawFourier(o,o,0,fX),t=drawFourier(o,o,pi/2,fY);path.push({x:e.x,y:t.y}),c.beginPath(),path.forEach((e,o)=>{lineTo(e.x,e.y,o)}),stroke(red),(time+=pi2/fY.length)>pi2&&(time=0,path=[])}else 0===mode&&(c.beginPath(),x.forEach((e,o)=>{lineTo(e,y[o],o)}),stroke(red));requestAnimationFrame(loop)},fourierT=e=>{let o=e.length;return e.map((t,r)=>{let i=0,a=0;for(let t=0;t<o;t++){let l=2*pi*r*t/o;i+=e[t]*M.cos(l),a-=e[t]*M.sin(l)}return i/=o,a/=o,{f:r,a:M.hypot(i,a),p:M.atan2(a,i)}})};loop();
//# sourceMappingURL=app.min.js.map
